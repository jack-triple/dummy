name: "Deployment Dispatcher"

on:
  workflow_dispatch:
    inputs:
      channel_type:
        description: '배포 채널'
        required: true
        type: choice
        options:
          - CHANNEL_A
          - CHANNEL_B
      environment:
        description: '배포 환경'
        required: true
        type: choice
        options:
          - development
          - staging
          - qa
          - production

jobs:
  deploy:
    uses: ./.github/workflows/create_release.yaml

  deply_channel_a:
    needs: deploy
    if: ${{ github.event.inputs.channel_type == 'CHANNEL_A'}}
    uses: ./.github/workflows/channel_a.yaml

  deploy_channel_b:
    needs: deploy
    if: ${{ github.event.inputs.channel_type == 'CHANNEL_B'}}
    uses: ./.github/workflows/channel_b.yml


